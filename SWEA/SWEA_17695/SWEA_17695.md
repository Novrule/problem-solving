# SWEA_17695 - 뉴스알림

## 문제

등록한 유저들에게 뉴스 알림 서비스를 제공하는 여러 개의 뉴스 채널이 있다.

유저가 뉴스 채널에 알림 서비스를 등록 하면, 뉴스가 해당 뉴스 채널에 제공될 때 마다 유저는 뉴스 알림을 받을 수 있다.

뉴스를 제공받은 뉴스 채널은 mDelay 지연시간 후에 등록한 유저에게 뉴스 알림을 보낸다.

즉, mTime 시각에 뉴스 채널이 뉴스를 제공 받았다면, 뉴스 채널은 등록한 유저에게 (mTime + mDelay) 시각에 뉴스 알림을 보낸다. mDelay 지연시간은 뉴스마다 다를 수 있다.

뉴스가 취소 되면 제공된 뉴스는 삭제된다. 뉴스가 알림을 보내기 전에 삭제되면 뉴스 알림을 보내지 않는다.

또한, 뉴스가 알림을 보낸 후에 삭제되면 유저가 받은 뉴스 알림도 바로 삭제된다.

즉, mTime 시각에 뉴스가 제공되고, (mTime + mDelay) 시각 전에 뉴스가 삭제되면 뉴스 알림은 보내지 않는다.

만약, (mTime + mDelay) 시각 또는 그 이후에 뉴스가 삭제되면 유저가 받은 뉴스 알림도 삭제된다.

뉴스 알림은 다음과 같은 기능을 가지고 있다.

1. 유저 등록 : 유저가 뉴스 알림 서비스를 제공하는 뉴스 채널에 알림 등록을 한다.

2. 뉴스 제공 : 새로운 뉴스가 뉴스 채널에 제공된다.  
   뉴스 채널은 뉴스가 제공된 시각에서 mDelay 지연시간만큼 더해진 시각에 알림 등록한 유저에게 뉴스 알림을 보낸다.

3. 뉴스 취소 : 뉴스가 삭제된다.  
   뉴스 채널에 제공된 뉴스는 삭제되고, 이미 유저에게 알림을 보낸 뉴스라면 유저에게 보내진 뉴스 알림도 삭제된다.

4. 유저 확인 : 유저가 받은 뉴스 알림의 개수와 뉴스 내용을 확인한다.

뉴스 채널과 유저의 등록 정보가 주어질 때, 유저가 받은 뉴스 알림을 확인할 수 있는 프로그램을 작성하여 보자.

## 입력

입력은 제공되는 Main 부분의 코드에서 처리하므로 User Code 부분의 코드에서는 별도로 입력을 처리하지 않는다.

## 출력

출력은 제공되는 Main 부분의 코드에서 처리하므로 User Code 부분의 코드에서는 별도로 출력을 처리하지 않는다.

## 예제 입력

```
1
32
0 3 5
1 1 11 2 111 222
1 2 22 3 333 444 555
1 3 33 2 555 111
2 5 12345 20 555 2
2 10 54321 15 111 2
2 11 11111 14 222 1
2 14 22222 20 444 1
2 17 33333 8 333 1
4 20 33 0
1 25 11 3 444 333 555
4 26 11 2 54321 11111
4 27 33 2 54321 12345
2 28 32112 8 333 2
2 29 56789 9 444 2
2 30 12215 5 555 3
3 32 22222
2 34 34219 18 111 2
3 35 12215
4 36 22 3 32112 33333 12345
4 37 22 0
3 40 56789
4 41 11 1 32112
2 47 55555 10 222 1
2 48 77777 13 222 1
2 49 77111 10 555 3
2 51 34577 10 111 2
2 57 88888 4 444 2
2 59 99999 10 111 2
4 61 11 6 88888 77777 34577
4 62 22 2 88888 77111
4 63 33 3 34577 77111 34219
```

## 예제 출력

```
#1 100
```

## 문제 풀이

문제의 조건에 맞게 우선순위 큐를 사용하면 되는 문제이다.

이를 코드로 구현하기 위해 뉴스를 저장하는 `News` 구조체를 구현해주었고,  
보내야하는 뉴스가 있는 경우 뉴스를 전부 보내주는 `sendNews` 함수,  
문제에서 주어지는 값들이 매우 크기 때문에 unordered_map을 이용해 좌표 압축을 해주는 `compress` 함수를 구현해주었다.

그 후, 우선순위 큐를 초기화해주는 `init` 함수, 특정 유저에게 채널을 등록해주는 `registerUser` 함수,  
채널에 뉴스를 제공해주는 `offerNews` 함수와 뉴스를 취소해주는 `cancelNews` 함수,  
특정한 유저가 받은 뉴스를 저장해주는 `checkUser` 함수를 문제의 조건에 맞게 구현해주었다.

그런데 이 때, 뉴스를 채널과 유저가 모두 저장을 하다 보니 메모리 초과가 발생했는데,  
이 문제를 `newsPool` 배열을 도입해 뉴스는 `newsPool` 배열에 저장하고,  
채널이나 유저가 저장을 해야 한다면 포인터를 저장해 주는 방식으로 해결해주었다.
